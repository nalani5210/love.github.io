function $id(e){return document.getElementById(e)}function IsArray(e){return e&&"object"==typeof e&&"number"==typeof e.length&&!e.propertyIsEnumerable("length")}function Process(){SetTab();var json=$id("rawJson").value,html="";try{""==json&&(json='""');var obj=eval("["+json+"]");html=ProcessObject(obj[0],0,!1,!1,!1),$id("canvas").innerHTML="<PRE class='CodeContainer'>"+html+"</PRE>"}catch(e){$id("canvas").innerHTML="<PRE class='CodeContainerError'><span style='color: red'>"+e.message+" , Please check the JSON format</span></PRE>"}$("#ControlsRow").css("margin-bottom","0")}function processMd5(){try{$id("canvas").innerHTML="<PRE class='CodeContainer'>"+md5(rawJson.value)+"</PRE>"}catch(e){$id("canvas").innerHTML="<PRE class='CodeContainerError'><span style='color: red'>"+e.message+" , Please check the JSON format</span></PRE>"}$("#ControlsRow").css("margin-bottom","0")}function ProcessObject(e,n,o,a,t){var s="",r=o?"<span class='Comma'>,</span> ":"",i=typeof e,l="";if(IsArray(e))if(0==e.length)s+=GetRow(n,"<span class='ArrayBrace'>[ ]</span>"+r,t);else{l=window.IsCollapsible?'<span><img src="'+window.ImgExpanded+'" onClick="ExpImgClicked(this)" /></span><span class=\'collapsible\'>':"",s+=GetRow(n,"<span class='ArrayBrace'>[</span>"+l,t);for(var c=0;c<e.length;c++)s+=ProcessObject(e[c],n+1,c<e.length-1,!0,!1);l=window.IsCollapsible?"</span>":"",s+=GetRow(n,l+"<span class='ArrayBrace'>]</span>"+r)}else if("object"==i)if(null==e)s+=FormatLiteral("null","",r,n,a,"Null");else if(e.constructor==window._dateObj.constructor)s+=FormatLiteral("new Date("+e.getTime()+") /*"+e.toLocaleString()+"*/","",r,n,a,"Date");else if(e.constructor==window._regexpObj.constructor)s+=FormatLiteral("new RegExp("+e+")","",r,n,a,"RegExp");else{var d=0;for(var p in e)d++;if(0==d)s+=GetRow(n,"<span class='ObjectBrace'>{ }</span>"+r,t);else{l=window.IsCollapsible?'<span><img src="'+window.ImgExpanded+'" onClick="ExpImgClicked(this)" /></span><span class=\'collapsible\'>':"",s+=GetRow(n,"<span class='ObjectBrace'>{</span>"+l,t);var w=0;for(var p in e){var u=window.QuoteKeys?'"':"";s+=GetRow(n+1,"<span class='PropertyName'>"+u+p+u+"</span>: "+ProcessObject(e[p],n+1,++w<d,!1,!0))}l=window.IsCollapsible?"</span>":"",s+=GetRow(n,l+"<span class='ObjectBrace'>}</span>"+r)}}else"number"==i?s+=FormatLiteral(e,"",r,n,a,"Number"):"boolean"==i?s+=FormatLiteral(e,"",r,n,a,"Boolean"):"function"==i?e.constructor==window._regexpObj.constructor?s+=FormatLiteral("new RegExp("+e+")","",r,n,a,"RegExp"):(e=FormatFunction(n,e),s+=FormatLiteral(e,"",r,n,a,"Function")):s+="undefined"==i?FormatLiteral("undefined","",r,n,a,"Null"):FormatLiteral(e.toString().split("\\").join("\\\\").split('"').join('\\"'),'"',r,n,a,"String");return s}function FormatLiteral(e,n,o,a,t,s){"string"==typeof e&&(e=e.split("<").join("&lt;").split(">").join("&gt;"));var r="<span class='"+s+"'>"+n+e+n+o+"</span>";return t&&(r=GetRow(a,r)),r}function FormatFunction(e,n){for(var o="",a=0;e>a;a++)o+=window.TAB;for(var t=n.toString().split("\n"),s="",a=0;a<t.length;a++)s+=(0==a?"":o)+t[a]+"\n";return s}function GetRow(e,n,o){for(var a="",t=0;e>t&&!o;t++)a+=window.TAB;return null!=n&&n.length>0&&"\n"!=n.charAt(n.length-1)&&(n+="\n"),a+n}function QuoteKeysClicked(){window.QuoteKeys=$id("QuoteKeys").checked,Process()}function MakeContentVisible(e,n){var o=e.previousSibling.firstChild;o.tagName&&"img"==o.tagName.toLowerCase()&&(e.style.display=n?"inline":"none",e.previousSibling.firstChild.src=n?window.ImgExpanded:window.ImgCollapsed)}function TraverseChildren(e,n,o){for(var a=0;a<e.childNodes.length;a++)TraverseChildren(e.childNodes[a],n,o+1);n(e,o)}function ExpImgClicked(e){var n=e.parentNode.nextSibling;if(n){var o="none",a=window.ImgCollapsed;"none"==n.style.display&&(o="inline",a=window.ImgExpanded),n.style.display=o,e.src=a}}function TabSizeChanged(){Process()}function SetTab(){var e=$id("TabSize");window.TAB=MultiplyString(parseInt(e.options[e.selectedIndex].value),window.SINGLE_TAB)}function EnsureIsPopulated(){!$id("canvas").innerHTML&&$id("rawJson").value&&Process()}function MultiplyString(e,n){for(var o=[],a=0;e>a;a++)o.push(n);return o.join("")}$(document).ready(function(){$(".am-thumbnails li").each(function(e,n){var o=$(n).height();0!=o&&($(n).prev().css("height",o+10),$(n).next().css("height",o+10))})}),window.SINGLE_TAB="  ",window.ImgCollapsed="Collapsed.gif",window.ImgExpanded="Expanded.gif",window.QuoteKeys=!0,window._dateObj=new Date,window._regexpObj=new RegExp;
