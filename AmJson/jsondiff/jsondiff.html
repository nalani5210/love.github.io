<html>
  <head>
    <title>JSON Diff - JSON Compare</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8" />
    <meta lang="en" name="description" content="online reformatter tool and JSON difference comparison  for JSON, a lightweight data-interchange format.">
    <meta lang="en" name="keywords" content="JSON Formatter,JSON Formatting,JSON Validator,JSON">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="INDEX, FOLLOW">
    <meta property="og:title" content="JSON Format, JSON Formatting">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://jsonformatting.com">
    <meta property="og:description" content="Format and differentiate JSON so that people can make better use of it.">

    <link rel="stylesheet" href="../assets/www/lib/codemirror/lib/codemirror.css" charset="utf-8">
    <link rel="stylesheet" href="../assets/www/lib/codemirror/theme/tomorrow-night.css" charset="utf-8">
    <link rel="stylesheet" href="../assets/css/jsondiff/main.css?cachebust=1" charset="utf-8">
  </head>
  <style type="text/css">
    .left-panel {
      display: none;
    }

    .diff-inputs {
      width: 100%;
    }

    .CodeMirror-gutters {
      height: 0 !important;
    }

    #left-input {
      border-bottom: 1px solid #e1e1e1;
    }

    #right-input {
      border-left: 1px solid #e1e1e1;
      border-bottom: 1px solid #e1e1e1;
    }

  </style>


  <body>
    <div class="left-panel">
      <div id="history-container" class="history-container">

      </div>
      <div class="ad-container">
        <!-- BEGIN COPY CODEFUND EMBED -->
        <div id="codefund"></div>
      </div>
    </div>
    <div class="diff-inputs">
      <div id="left-input" class="json-diff-input split">
        <textarea id="json-diff-left"></textarea>
      </div>
      <div id="right-input" class="json-diff-input split">
        <textarea id="json-diff-right"></textarea>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="../assets/www/lib/fast-json-patch/dist/json-patch-duplex.min.js" charset="utf-8"></script>
    <script src="../assets/www/lib/backbone-events-standalone/backbone-events-standalone.min.js" charset="utf-8"></script>
    <script src="../assets/www/lib/codemirror/lib/codemirror.js" charset="utf-8"></script>
    <script src="../assets/www/lib/codemirror/lib/util/formatting.js" charset="utf-8"></script>
    <script src="../assets/www/lib/codemirror/mode/javascript/javascript.js" charset="utf-8"></script>
    <script src="../assets/www/lib/codemirror/addon/edit/matchbrackets.js" charset="utf-8"></script>
    <script src="../assets/www/lib/json-source-map.js" charset="utf-8"></script>
    <script src="../assets/js/jsondiff/main.js" charset="utf-8"></script>
<!--    <script>-->
<!--      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){-->
<!--      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),-->
<!--      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)-->
<!--      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');-->

<!--      ga('create', 'UA-21007774-21', 'auto');-->
<!--      ga('send', 'pageview');-->

<!--    </script>-->
    <script>
      $(".cm-s-tomorrow-night").addClass("CodeMirror-focused");
      initAd();
      var isLightTheme = localStorage.getItem('lighttheme');
      if (isLightTheme) {
        enableLightTheme();
      }
      var dontSaveDiffs = localStorage.getItem('dont-save-diffs');
      if (dontSaveDiffs) {
        $('#localstorage-toggle').get(0).checked = false;
      }
      $('#lighttheme-toggle').on('change', function (e) {
        toggleLightTheme();
      });

      $('#localstorage-toggle').on('change', function (e) {
        if (!e.currentTarget.checked) {
          localStorage.setItem('dont-save-diffs', true);
          localStorage.removeItem('current-diff');
          localStorage.removeItem('diff-history');
        } else {
          localStorage.removeItem('dont-save-diffs');
        }

      });

      $('#download-diff-button').on('click', onClickDownloadDiff);
      $('#left-input').on('click', '.input-collapse,.input-split,.input-expand', onPaneResizeLeftClick);
      $('#right-input').on('click', '.input-collapse,.input-split,.input-expand', onPaneResizeRightClick);

      function initAd() {
        var adNum = Math.floor(Math.random() * Math.floor(3)) + 1;
        var ad = $('<a href="https://blitapp.com?ref=json-diff-img'+adNum+'" class="carbon-img" target="_blank" rel="noopener"><img src="../assets/i/blit-ad'+adNum+'.png" alt="Blit - Scheduled Website Screenshots" border="0" height="100" width="130" style="max-width: 130px;"></a>');
        $('#ad-wrap').prepend(ad);
      }

      function toggleLightTheme() {
        var isLightTheme = localStorage.getItem('lighttheme');
        if (isLightTheme) {
          disableLightTheme();
        } else {
          enableLightTheme();
        }
      }

      function enableLightTheme() {
        localStorage.setItem('lighttheme', true);
        $('body').addClass('lighttheme');
        $('#lighttheme-toggle').get(0).checked = true;
        setTheme('default');
      }

      function disableLightTheme() {
        localStorage.removeItem('lighttheme');
        $('body').removeClass('lighttheme');
        $('#lighttheme-toggle').get(0).checked = false;
        setTheme('tomorrow-night');
      }

      function setTheme(theme) {
        var views = getInputViews();
        views.left.codemirror.setOption('theme', theme);
        views.right.codemirror.setOption('theme', theme);
        compareJson();
      }

      function onClickDownloadDiff() {
        var filename = 'diff.json';
        var text = JSON.stringify(window.diff, null, 2);
        var element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);

        element.style.display = 'none';
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
      }

      function onPaneResizeLeftClick(e) {
        onResize(e, 'left');
      }

      function onPaneResizeRightClick(e) {
        onResize(e, 'right');
      }

      function onResize(e, side) {
        e.preventDefault();
        var otherSide = side === 'left' ? 'right' : 'left';
        var clickClass = e.currentTarget.className;
        $('.json-diff-input').removeClass('split');
        $('.json-diff-input').removeClass('expand');
        $('.json-diff-input').removeClass('collapse');
        var sideClass = 'split';
        var otherSideClass = 'split';
        if (clickClass === 'input-collapse') {
          sideClass = 'collapse';
          otherSideClass = 'expand';
        } else if (clickClass === 'input-expand') {
          sideClass = 'expand';
          otherSideClass = 'collapse';
        }
        $('#' + side + '-input').addClass(sideClass);
        $('#' + otherSide + '-input').addClass(otherSideClass);
      }
    </script>
  </body>
</html>
