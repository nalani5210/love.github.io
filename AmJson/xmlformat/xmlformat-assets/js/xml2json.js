function xml2json(h,m,l){l="undefined"===typeof l?!0:!!l;var k=!!m.length,e={toObj:function(a){var c={};if(1==a.nodeType){if(l&&a.attributes.length)for(var g=0;g<a.attributes.length;g++)c["@"+a.attributes[g].nodeName]=(a.attributes[g].nodeValue||"").toString();if(a.firstChild){for(var d=g=0,f=!1,b=a.firstChild;b;b=b.nextSibling)1==b.nodeType?f=!0:3==b.nodeType&&b.nodeValue.match(/[^ \f\n\r\t\v]/)?g++:4==b.nodeType&&d++;if(f)if(2>g&&2>d)for(e.removeWhite(a),b=a.firstChild;b;b=b.nextSibling)3==b.nodeType?
		c["#text"]=e.escape(b.nodeValue):4==b.nodeType?c["#cdata"]=e.escape(b.nodeValue):c[b.nodeName]?c[b.nodeName]instanceof Array?c[b.nodeName][c[b.nodeName].length]=e.toObj(b):c[b.nodeName]=[c[b.nodeName],e.toObj(b)]:c[b.nodeName]=e.toObj(b);else a.attributes.length?c["#text"]=e.escape(e.innerXml(a)):c=e.escape(e.innerXml(a));else if(g)l&&a.attributes.length?c["#text"]=e.escape(e.innerXml(a)):c=e.escape(e.innerXml(a));else if(d)if(1<d)c=e.escape(e.innerXml(a));else for(b=a.firstChild;b;b=b.nextSibling)c["#cdata"]=
		e.escape(b.nodeValue)}a.attributes.length||a.firstChild||(c=null)}else 9==a.nodeType?c=e.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return c},toJson:function(a,c,g){var d=c?'"'+c+'"':"";if(a instanceof Array){for(var f=0,b=a.length;f<b;f++)a[f]=e.toJson(a[f],"",g+"\t");d+=(c?k?": [":":[":"[")+(1<a.length?"\n"+g+"\t"+a.join(",\n"+g+"\t")+"\n"+g:a.join(""))+"]"}else if(null==a)d+=(c&&":")+"null";else if("object"==typeof a){f=[];for(b in a)f[f.length]=e.toJson(a[b],b,g+"\t");
		d+=(c?k?": {":":{":"{")+(1<=f.length?"\n"+g+"\t"+f.join(",\n"+g+"\t")+"\n"+g:f.join(""))+"}"}else d="string"==typeof a?d+((c&&(k?": ":":"))+'"'+a.toString()+'"'):d+((c&&(k?": ":":"))+a.toString());return d},innerXml:function(a){var c="";if("innerHTML"in a)c=a.innerHTML;else{var g=function(d){var f="";if(1==d.nodeType){f+="<"+d.nodeName;for(var b=0;b<d.attributes.length;b++)f+=" "+d.attributes[b].nodeName+'="'+(d.attributes[b].nodeValue||"").toString()+'"';if(d.firstChild){f+=">";for(b=d.firstChild;b;b=
		b.nextSibling)f+=g(b);f+="</"+d.nodeName+">"}else f+="/>"}else 3==d.nodeType?f+=d.nodeValue:4==d.nodeType&&(f+="<![CDATA["+d.nodeValue+"]]\x3e");return f};for(a=a.firstChild;a;a=a.nextSibling)c+=g(a)}return c},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/["]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();for(var c=a.firstChild;c;)if(3==c.nodeType)if(c.nodeValue.match(/[^ \f\n\r\t\v]/))c=c.nextSibling;else{var g=c.nextSibling;a.removeChild(c);
		c=g}else 1==c.nodeType&&e.removeWhite(c),c=c.nextSibling;return a}};9==h.nodeType&&(h=h.documentElement);h=e.toJson(e.toObj(e.removeWhite(h)),h.nodeName,"\t");return"{"+(k?"\n":"")+m+(m?h.replace(/\t/g,m):h.replace(/\t|\n/g,""))+(k?"\n":"")+"}"};
